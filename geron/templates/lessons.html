{% extends "base.html"%} {% block title%} Lessons {% endblock %}
{% block content %}

<form method="POST" id="membership-form">
    {% csrf_token %}
    {{ form.parent_name }}
    {{ form.child_name }}

    <label for="id_membership_type">План обучения:</label>
    {{ form.membership_type }}

    <div id="price-container" style="display: none;">
        <label for="id_price">Цена</label>
        <input type="text" id="id_price" name="price" value="" readonly>
    </div>

    <div id="start-date-container" style="display: none;">
        <label for="id_start_date">Дата начала занятий:</label>
        {{ form.start_date }}
    </div>

    <button type="submit">Оформить</button>
</form>

<script type="text/javascript">
    document.getElementById('id_membership_type').addEventListener('change', function () {
        const membershipType = this.value;
        const priceContainer = document.getElementById('price-container');
        const startDateContainer = document.getElementById('start-date-container');
        const priceInput = document.getElementById('id_price');

        let price = 0;

        switch (membershipType) {
            case '1_month':
                price = 50;
                break;
            case '3_months':
                price = 120;
                break;
            case '6_months':
                price = 200;
                break;
            case '1_year':
                price = 350;
                break;
            default:
                price = 0;
        }

        if (price > 0) {
            priceContainer.style.display = 'block';
            startDateContainer.style.display = 'block';
            priceInput.value = '$' + price;
        } else {
            priceContainer.style.display = 'none';
            startDateContainer.style.display = 'none';
        }
    });
</script>

{% endblock %}
